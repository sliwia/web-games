{"ast":null,"code":"var _jsxFileName = \"/Users/liwia/Documents/Projects/web-games/src/PaddleGame/PaddleGame.js\";\nimport React from 'react';\nimport { Icon, Button, Tooltip } from 'antd';\nimport './PaddleGame.css';\nimport lang from '../files/lang.json';\n\nclass PaddleGame extends React.Component {\n  constructor() {\n    super();\n    this.game = {\n      gameSpeed: 1000,\n      gameBoard: null,\n      context: null,\n      ballX: 100,\n      ballY: 100,\n      ballSpeedX: 5,\n      ballSpeedY: 7,\n      paddleWidth: 100,\n      paddleHeight: 10,\n      paddleDistFromEdge: 60,\n      paddleX: 400\n    };\n    let highScore = Number(localStorage.getItem(\"highScore\"));\n    this.state = {\n      gameRefreshInterval: null,\n      bounces: 0,\n      highScore: highScore,\n      isFullScreen: false\n    };\n\n    if (localStorage.getItem('highScore') > 10 && localStorage.getItem('highScore') < 20) {\n      this.game.gameSpeed = 500;\n    }\n\n    if (localStorage.getItem('highScore') > 20) {\n      this.game.gameSpeed = 250;\n    }\n\n    this.updateAll = this.updateAll.bind(this);\n    this.updateMousePosition = this.updateMousePosition.bind(this);\n  }\n\n  componentDidMount() {\n    this.game.gameBoard = this.refs.canvas;\n    this.game.context = this.refs.canvas.getContext('2d');\n    let speedValue = localStorage.getItem('gameSpeed'); // this.setState({gameRefreshInterval: setInterval(this.updateAll, this.game.gameSpeed/speedValue)});\n\n    clearInterval(this.state.gameRefreshInterval);\n    this.setState({\n      gameRefreshInterval: null\n    });\n    this.refs.canvas.addEventListener('mousemove', this.updateMousePosition);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.state.gameRefreshInterval);\n    this.setState({\n      gameRefreshInterval: null\n    });\n  }\n\n  updateDirection() {\n    this.game.ballX += this.game.ballSpeedX;\n    this.game.ballY += this.game.ballSpeedY;\n\n    if (this.game.ballX < 0) {\n      this.game.ballSpeedX *= -1;\n    }\n\n    if (this.game.ballX > this.game.gameBoard.width) {\n      this.game.ballSpeedX *= -1;\n    }\n\n    if (this.game.ballY < 0) {\n      this.game.ballSpeedY *= -1;\n    }\n\n    if (this.game.ballY > this.game.gameBoard.height) {\n      this.resetBall();\n      this.setState({\n        bounces: 0\n      });\n    }\n\n    let paddleTopEdgeY = this.game.gameBoard.height - this.game.paddleDistFromEdge;\n    let paddleBottomEdgeY = paddleTopEdgeY + this.game.paddleHeight;\n    let paddleLeftEdgeX = this.game.paddleX;\n    let paddleRightEdgeX = paddleLeftEdgeX + this.game.paddleWidth;\n\n    if (this.game.ballY > paddleTopEdgeY && this.game.ballY < paddleBottomEdgeY && this.game.ballX > paddleLeftEdgeX && this.game.ballX < paddleRightEdgeX) {\n      this.game.ballSpeedY *= -1;\n      this.setState({\n        bounces: this.state.bounces + 1\n      });\n      this.setHighScore();\n    }\n  }\n\n  setHighScore() {\n    let highScore = Number(localStorage.getItem(\"highScore\"));\n\n    if (highScore < this.state.bounces) {\n      localStorage.setItem(\"highScore\", this.state.bounces);\n      this.setState({\n        highScore: this.state.bounces\n      });\n    }\n  }\n\n  printElements() {\n    this.game.context.fillStyle = '#8b8b8b';\n    this.game.context.fillRect(0, 0, this.game.gameBoard.width, this.game.gameBoard.height);\n    this.game.context.fillStyle = '#121212';\n    this.game.context.fillRect(this.game.paddleX, this.game.gameBoard.height - this.game.paddleDistFromEdge - this.game.paddleHeight, this.game.paddleWidth, this.game.paddleHeight);\n    this.game.context.fillStyle = '#121212';\n    this.game.context.beginPath();\n    this.game.context.arc(this.game.ballX, this.game.ballY, 10, 0, Math.PI * 2, true);\n    this.game.context.fill();\n  }\n\n  updateAll() {\n    this.printElements();\n    this.updateDirection();\n  }\n\n  updateMousePosition(ev) {\n    let rect = this.refs.canvas.getBoundingClientRect();\n    let mouseX = ev.clientX - rect.left;\n    this.game.paddleX = mouseX - this.game.paddleWidth / 2;\n  }\n\n  resetBall() {\n    this.game.ballX = this.game.gameBoard.width / 2;\n    this.game.ballY = this.game.gameBoard.height / 4;\n  }\n\n  toggleFullScreen() {\n    this.setState({\n      isFullScreen: !this.state.isFullScreen\n    });\n  }\n\n  startStopGame() {\n    if (!this.state.gameRefreshInterval) {\n      this.setState({\n        gameRefreshInterval: setInterval(this.updateAll, this.game.gameSpeed / 30)\n      });\n    } else {\n      clearInterval(this.state.gameRefreshInterval);\n      this.setState({\n        gameRefreshInterval: null\n      });\n    }\n  }\n\n  resetScore() {\n    localStorage.setItem('highScore', '0');\n    this.setState({\n      bounces: 0,\n      highScore: 0\n    });\n  }\n\n  render() {\n    let startStopGameBtn;\n\n    if (!this.state.gameRefreshInterval) {\n      startStopGameBtn = React.createElement(Button, {\n        className: \"btn-start-stop-reset pulse-effect\",\n        type: \"primary\",\n        onClick: this.startStopGame.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        type: \"play-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), lang[localStorage.getItem('lang')].startButton);\n    } else {\n      startStopGameBtn = React.createElement(Button, {\n        className: \"btn-start-stop-reset\",\n        type: \"primary\",\n        onClick: this.startStopGame.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        type: \"pause-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }), lang[localStorage.getItem('lang')].stopButton);\n    }\n\n    return React.createElement(\"div\", {\n      className: \"paddle-game-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(Tooltip, {\n      placement: \"bottom\",\n      title: lang[localStorage.getItem('lang')].fullScreenTooltip,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.toggleFullScreen.bind(this),\n      className: \"btn-full-screen\",\n      type: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"fullscreen\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, lang[localStorage.getItem('lang')].currentScoreTitle, \" \", this.state.bounces), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"trophy\",\n      theme: \"twoTone\",\n      twoToneColor: \"gold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), \" \", lang[localStorage.getItem('lang')].highestScoreTitle, \" \", this.state.highScore), startStopGameBtn, React.createElement(Button, {\n      type: \"primary\",\n      className: \"btn-start-stop-reset\",\n      onClick: this.resetScore.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"reload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }), lang[localStorage.getItem('lang')].resetGameButton)), React.createElement(\"canvas\", {\n      onDoubleClick: this.toggleFullScreen.bind(this),\n      className: this.state.isFullScreen ? \"canvas canvas-full-screen\" : \"canvas\",\n      ref: \"canvas\",\n      width: \"800\",\n      height: \"600\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default PaddleGame;","map":{"version":3,"sources":["/Users/liwia/Documents/Projects/web-games/src/PaddleGame/PaddleGame.js"],"names":["React","Icon","Button","Tooltip","lang","PaddleGame","Component","constructor","game","gameSpeed","gameBoard","context","ballX","ballY","ballSpeedX","ballSpeedY","paddleWidth","paddleHeight","paddleDistFromEdge","paddleX","highScore","Number","localStorage","getItem","state","gameRefreshInterval","bounces","isFullScreen","updateAll","bind","updateMousePosition","componentDidMount","refs","canvas","getContext","speedValue","clearInterval","setState","addEventListener","componentWillUnmount","updateDirection","width","height","resetBall","paddleTopEdgeY","paddleBottomEdgeY","paddleLeftEdgeX","paddleRightEdgeX","setHighScore","setItem","printElements","fillStyle","fillRect","beginPath","arc","Math","PI","fill","ev","rect","getBoundingClientRect","mouseX","clientX","left","toggleFullScreen","startStopGame","setInterval","resetScore","render","startStopGameBtn","startButton","stopButton","fullScreenTooltip","currentScoreTitle","highestScoreTitle","resetGameButton"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Icon, Button, Tooltip } from 'antd';\nimport './PaddleGame.css';\nimport lang from '../files/lang.json';\n\nclass PaddleGame extends React.Component {\n  constructor() {\n    super();\n\n    this.game = {\n      gameSpeed: 1000,\n      gameBoard: null,\n      context: null,\n      ballX: 100,\n      ballY: 100,\n      ballSpeedX: 5,\n      ballSpeedY: 7,\n      paddleWidth: 100,\n      paddleHeight: 10,\n      paddleDistFromEdge: 60,\n      paddleX: 400\n    }\n    let highScore = Number(localStorage.getItem(\"highScore\"));\n    \n    this.state = {\n      gameRefreshInterval: null,\n      bounces: 0,\n      highScore: highScore,\n      isFullScreen: false\n    }\n\n    if (localStorage.getItem('highScore') > 10 && localStorage.getItem('highScore') < 20) {\n      this.game.gameSpeed = 500\n    }\n\n    if (localStorage.getItem('highScore') > 20) {\n      this.game.gameSpeed = 250\n    }\n\n    this.updateAll = this.updateAll.bind(this);\n    this.updateMousePosition = this.updateMousePosition.bind(this);\n  }\n\n  componentDidMount() {\n    this.game.gameBoard = this.refs.canvas;\n    this.game.context = this.refs.canvas.getContext('2d');\n    let speedValue = localStorage.getItem('gameSpeed'); \n    // this.setState({gameRefreshInterval: setInterval(this.updateAll, this.game.gameSpeed/speedValue)});\n    clearInterval(this.state.gameRefreshInterval);\n    this.setState({gameRefreshInterval: null})\n    this.refs.canvas.addEventListener('mousemove', this.updateMousePosition)\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.state.gameRefreshInterval);\n    this.setState({gameRefreshInterval: null})\n  }\n\n  updateDirection() {\n    this.game.ballX += this.game.ballSpeedX;\n    this.game.ballY += this.game.ballSpeedY;\n  \n    if(this.game.ballX < 0) {\n      this.game.ballSpeedX *= -1;\n    }\n    if(this.game.ballX > this.game.gameBoard.width) {\n      this.game.ballSpeedX *= -1;\n    }\n    if(this.game.ballY < 0) {\n      this.game.ballSpeedY *= -1;\n    }\n    if(this.game.ballY > this.game.gameBoard.height) {\n      this.resetBall();\n      this.setState({bounces: 0})\n    }\n  \n    let paddleTopEdgeY = this.game.gameBoard.height - this.game.paddleDistFromEdge;\n    let paddleBottomEdgeY = paddleTopEdgeY + this.game.paddleHeight;\n    let paddleLeftEdgeX = this.game.paddleX;\n    let paddleRightEdgeX = paddleLeftEdgeX + this.game.paddleWidth;\n\n    if (this.game.ballY > paddleTopEdgeY &&\n        this.game.ballY < paddleBottomEdgeY &&\n        this.game.ballX > paddleLeftEdgeX &&\n        this.game.ballX < paddleRightEdgeX) {\n        this.game.ballSpeedY *= -1;\n        this.setState({bounces: this.state.bounces + 1} );\n        this.setHighScore();\n        }\n  }\n\n  setHighScore() {\n    let highScore = Number(localStorage.getItem(\"highScore\"));\n    if (highScore < this.state.bounces) {\n      localStorage.setItem(\"highScore\", this.state.bounces );\n      this.setState({highScore: this.state.bounces} );\n    }\n  }\n\n  printElements() {\n    this.game.context.fillStyle = '#8b8b8b';\n    this.game.context.fillRect(0,0, this.game.gameBoard.width, this.game.gameBoard.height)\n  \n    this.game.context.fillStyle = '#121212';\n    this.game.context.fillRect(this.game.paddleX, this.game.gameBoard.height - this.game.paddleDistFromEdge - this.game.paddleHeight, this.game.paddleWidth, this.game.paddleHeight)\n  \n    this.game.context.fillStyle = '#121212';\n    this.game.context.beginPath();\n    this.game.context.arc(this.game.ballX, this.game.ballY, 10, 0, Math.PI * 2, true);\n    this.game.context.fill();\n  }\n  \n  updateAll() {\n    this.printElements();\n    this.updateDirection();\n  }\n  \n  updateMousePosition(ev) {\n    let rect = this.refs.canvas.getBoundingClientRect();\n    let mouseX = ev.clientX - rect.left;\n    this.game.paddleX = mouseX - (this.game.paddleWidth / 2);\n  }\n  \n  resetBall() {\n    this.game.ballX = this.game.gameBoard.width / 2;\n    this.game.ballY = this.game.gameBoard.height / 4;\n  }\n\n  toggleFullScreen() {\n    this.setState({\n      isFullScreen: !this.state.isFullScreen\n    })\n  }\n\n  startStopGame() {\n    if (!this.state.gameRefreshInterval) {\n      this.setState({gameRefreshInterval: setInterval(this.updateAll, this.game.gameSpeed/30)});\n    } else {\n      clearInterval(this.state.gameRefreshInterval);\n      this.setState({gameRefreshInterval: null})\n    }\n  }\n\n  resetScore() {\n    localStorage.setItem('highScore', '0');\n    this.setState({\n      bounces: 0,\n      highScore:0\n    })\n  }\n\n  render() {\n    let startStopGameBtn;\n\n    if (!this.state.gameRefreshInterval) {\n      startStopGameBtn = <Button \n        className=\"btn-start-stop-reset pulse-effect\" \n        type=\"primary\" \n        onClick={this.startStopGame.bind(this)}>\n          <Icon type=\"play-circle\" />{lang[localStorage.getItem('lang')].startButton}\n      </Button>\n    } else {\n      startStopGameBtn = <Button \n        className=\"btn-start-stop-reset\" \n        type=\"primary\" \n        onClick ={this.startStopGame.bind(this)}>\n          <Icon type=\"pause-circle\" />{lang[localStorage.getItem('lang')].stopButton}\n        </Button>\n    }\n\n    return (\n      <div className=\"paddle-game-container\">\n        <Tooltip placement=\"bottom\" title={lang[localStorage.getItem('lang')].fullScreenTooltip}>\n          <Button \n          onClick={this.toggleFullScreen.bind(this)}\n          className=\"btn-full-screen\"\n          type=\"primary\"><Icon type=\"fullscreen\" />\n          </Button>\n        </Tooltip>\n        <div>\n          <h1>{ lang[localStorage.getItem('lang')].currentScoreTitle } {this.state.bounces}</h1>\n          <h2><Icon type=\"trophy\" theme=\"twoTone\" twoToneColor=\"gold\" /> { lang[localStorage.getItem('lang')].highestScoreTitle } {this.state.highScore}</h2> \n          {startStopGameBtn}\n          <Button \n            type=\"primary\" \n            className=\"btn-start-stop-reset\" \n            onClick={this.resetScore.bind(this)}><Icon type=\"reload\" />{lang[localStorage.getItem('lang')].resetGameButton}\n          </Button>\n        </div>\n        <canvas \n          onDoubleClick={this.toggleFullScreen.bind(this)}\n          className={this.state.isFullScreen ? \"canvas canvas-full-screen\": \"canvas\"}\n          ref=\"canvas\" \n          width=\"800\" \n          height=\"600\"\n        ></canvas>\n      </div>\n    );\n  } \n}\n\n\nexport default PaddleGame;\n"]},"metadata":{},"sourceType":"module"}